<script src="https://rawgithub.com/eligrey/FileSaver.js/master/FileSaver.js" type="text/javascript"></script>
<hr>
<div ng-controller="RecordController">
	<span class="label label-info">{{inputs.count}} Adentro</span>
	<span class="label label-success">{{permitted.count}} Permitidos (total)</span>
	<span class="label label-danger">{{rejected.count}} Rechazados (total)</span>
</div>
<hr>
<div ng-controller="RecordController" class="table-responsive">
	<ul class="inline">
		<li><a href ng-click="eventDateFilter('today')">Hoy</a></li>
		<li><a href ng-click="eventDateFilter('pastWeek')">7 días</a></li>
        <li><a href ng-click="eventDateFilter('pastMonth')">30 días</a></li>
		<li><a href ng-click="eventDateFilter('all')">Todos</a></li>
		<!--<div class="btn-group">
		  <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    Reporte <span class="caret"></span>
		  </button>
		  <ul class="dropdown-menu">
			<li><a href="#" data-toggle="tooltip" title="Hooray!" ng-click="exportData()">Diario</a></li>
  		    <li><a href="#">Rango de fecha</a></li>
			<li role="separator" class="divider"></li>
  		    <li><a href="#">Contador</a></li>
		  </ul>
	  </div>-->
	</ul>
	<table class="table table-striped table-hover table-advance" id="records">
		<thead>
		<tr>
			<th>#</th>
			<th>Rut</th>
			<th>Nombre Completo</th>
			<th>
				<a href="#" ng-click="sortType = 'input_datetime'; sortIt = !sortIt">
				    <span ng-show="sortType == 'input_datetime' && !sortIt" class="fa fa-caret-down"></span>
				    <span ng-show="sortType == 'input_datetime' && sortIt" class="fa fa-caret-up"></span>
				Ingreso
				</a>
			</th>
			<th>
				<a href="#" ng-click="sortType = 'output_datetime'; sortIt = !sortIt">
				    <span ng-show="sortType == 'output_datetime' && !sortIt" class="fa fa-caret-down"></span>
				    <span ng-show="sortType == 'output_datetime' && sortIt" class="fa fa-caret-up"></span>
				Salida
				</a>
			</th>
			<th>
				<a href="#" ng-click="sortType = 'is_permitted'; sortIt = !sortIt">
				    <span ng-show="sortType == 'is_permitted' && !sortIt" class="fa fa-caret-down"></span>
				    <span ng-show="sortType == 'is_permitted' && sortIt" class="fa fa-caret-up"></span>
				Estado
				</a>
			</th>
			<th>Comentario</th>
		</tr>
		</thead>
		<tbody>
			<!--<tr ng:repeat="record in records | orderBy:sortType:sortIt | filter:dateRange">-->
			<tr ng:repeat="record in records | orderBy:sortType:sortIt | filter:dateRange | filter: filterByDate(input_datetime) | filter: paginate | filter: expression">
				<td style="font-weight:bold">{{$index + 1}}</td>
				<td><!--<a href="people/{{record.people_run}}">-->{{record.people_run}}<!--</a>--></td>
				<td>{{record.fullname}}</td>
				<td>{{record.input_datetime | date:'dd MMM yyyy HH:mm:ss'}}</td>
				<td>{{record.output_datetime | date:'dd MMM yyyy HH:mm:ss'}}</td>
				<td>
					<span ng-if="record.is_permitted" class="label label-success label-mini">Permitido</span>
					<span ng-if="record.is_permitted == false" class="label label-danger label-mini">Denegado</span>
				</td>
				<td>
					<input type="text" ng-model="record.comment" ng-change="update(record)" placeholder="Comentario" class="form-control">
					<!-- <button class="btn btn-danger btn-xs" ng-click="delete($index)">  <span class="glyphicon glyphicon-trash" ></span></button> -->
				</td>
			</tr>
		</tbody>
	</table>
</div>
