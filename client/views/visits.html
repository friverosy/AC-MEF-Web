<script src="https://rawgithub.com/eligrey/FileSaver.js/master/FileSaver.js" type="text/javascript"></script>

<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
	Visitas
  </h1>
  <ol class="breadcrumb">
	<li><a href="/#/dashboard"><i class="fa fa-dashboard"></i> Home</a></li>
	<li class="active">Visitas</li>
  </ol>
</section>

<!-- Main content -->
<section class="content">
    <div class="row" ng-controller="RecordController">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-header">
              <h3 class="box-title">Registro de visitas ({{num_visits.count}} en planta)</h3>
            </div><!-- /.box-header -->
            <div class="box-body">
                <ul class="nav nav-tabs">
                    <li><a href ng-click="eventDateFilter('today')">Hoy</a></li>
            		<li><a href ng-click="eventDateFilter('pastWeek')">7 días</a></li>
                    <li><a href ng-click="eventDateFilter('pastMonth')">30 días</a></li>
            		<li><a href ng-click="eventDateFilter('all')">Todos</a></li>
                  <li class="pull-right"><a href="/#/visits" class="text-muted"><i class="fa fa-refresh"></i></a></li>
                </ul>
              <table id="example2" class="table table-bordered table-hover">
                <thead>
                    <tr>
                          <th>Rut</th>
                          <th>Nombre</th>
                          <th>Empresa</th>
                          <th>Motivo</th>
                          <th>Destino</th>
                          <th>Entrada</th>
                          <th>Salida</th>
                          <th>Patente Entrada</th>
                          <th>Estacionamiento</th>
                          <th>Patente Salida</th>
                          <th>Autorizado por</th>
                      </tr>
                </thead>
                <tbody>
                    <tr dir-paginate="record in visits | filter: filterByDate(input_datetime) | filter: searchKeyword | itemsPerPage:10">
                          <td>{{record.people_run}}</td>
                          <td><input type="text" ng-model="record.fullname" ng-change="update(record)" placeholder="Patente de entrada" class="form-control"></td>
                          <td><input type="text" ng-model="record.company" ng-change="update(record)" placeholder="Empresa" class="form-control"></td>
                          <td><input type="text" ng-model="record.reason" ng-change="update(record)" placeholder="Motivo" class="form-control"></td>
                          <td>
                              <select
                              ng-model="destination"
                              ng-options="value.id as value.name for value in destinations"
                              ></select>
                          </td>
                          <td>{{record.input_datetime | date:'dd MMM yyyy HH:mm:ss'}}</td>
                          <td>{{record.output_datetime | date:'dd MMM yyyy HH:mm:ss'}}</td>
                          <td><input type="text" ng-model="record.input_patent" ng-change="update(record)" placeholder="Patente de entrada" class="form-control"></td>
                          <td>
                              <select
                              ng-model="parkings"
                              ng-options="value.id as value.name for value in parkings"
                              ></select>
                          </td>
                          <td><input type="text" ng-model="record.output_patent" ng-change="update(record)" placeholder="Patente de salida" class="form-control"></td>
                          <td><input type="text" ng-model="record.authorized_by" ng-change="update(record)" placeholder="Autorizado por" class="form-control"></td>
                      </tr>
                </tbody>
              </table>
              <dir-pagination-controls
                 max-size="10"
                 direction-links="true"
                 boundary-links="true" >
              </dir-pagination-controls>
            </div><!-- /.box-body -->
            <button class="btn btn-link" ng-click="exportData()">
                <span class="glyphicon glyphicon-share"></span> Export to Excel
            </button>
          </div><!-- /.box -->
      </div>
  </div><!-- /.row -->
</section><!-- /.content -->
